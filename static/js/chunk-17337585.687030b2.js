(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17337585"],{"049e":function(t,e,a){},"396e":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return void 0!=t.list.album?a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"home"},[a("div",{staticClass:"head"},[a("img",{staticClass:"ablumImg",staticStyle:{width:"20vh",height:"20vh"},attrs:{src:t.list.album.blurPicUrl,alt:""}}),a("div",{staticClass:"text-white ablumWord"},[t._v("专辑")]),a("div",{staticClass:"albumname"},[t._v(t._s(t.list.album.name))]),t._l(t.list.album.alias,(function(e,n){return a("div",{key:n,staticClass:"albumalias"},[t._v("("+t._s(e)+")")])})),a("div",{staticClass:"btnGroud"},[a("el-button",{attrs:{type:"danger",icon:"el-icon-caret-right"}},[t._v("播放全部")]),a("el-button",{attrs:{icon:"el-icon-circle-plus-outline"}},[t.dynamicCount.isSub?a("span",{staticStyle:{display:"inline-block"}},[t._v("已")]):t._e(),t._v("收藏("+t._s(t.dynamicCount.subCount)+")")]),a("el-button",{attrs:{icon:"el-icon-share"}},[t._v("分享("+t._s(t.dynamicCount.shareCount)+")")])],1),a("div",{staticClass:"singer"},[t._v("歌手:"),a("span",{staticStyle:{display:"inline-block",color:"grey"}},[t._v(t._s(t.list.album.artist.name))])]),a("div",[t._v("评论数"+t._s(t.dynamicCount.commentCount))])],2),a("div",{staticClass:"tabs"},[a("el-tabs",{staticClass:"ml-4",model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"歌曲列表",name:"first"}},[a("div",{staticClass:"title border-left"},[a("h5",{staticClass:" border-right"},[t._v("音乐标题")]),a("h5",{staticClass:" border-right "},[t._v("歌手")]),a("h5",{staticClass:" border-right "},[t._v("专辑")]),t._l(t.list.songs,(function(e,n){return a("div",{key:n,staticClass:"border-bottom border-top ",on:{click:function(a){return t.handleClick(e.id)}}},[a("el-row",[a("el-col",{attrs:{span:5}},[a("div",{staticClass:" border-right"},[a("h6",{staticClass:"name text-primary  "},[t._v(" "+t._s(e.name))])])]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"border-right"},t._l(e.ar,(function(e,n){return a("div",{key:n,staticClass:"singer mr-auto "},[t._v(" "+t._s(e.name)+" ")])})),0)]),a("el-col",{attrs:{span:5}},[a("div",{staticClass:"border-right"},[a("div",{staticClass:"album "},[t._v(" "+t._s(e.al.name)+" ")])])])],1)],1)}))],2)]),a("el-tab-pane",{attrs:{label:t.commentCount,name:"second"}},[a("div",{staticStyle:{height:"10vh"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入内容",maxlength:"140","show-word-limit":""},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}}),a("el-button",{staticClass:"mr-1 mt-1",staticStyle:{display:"block",float:"right"}},[t._v("发送")])],1),t.commentList.hotComments?a("div",{staticClass:"second"},[a("h5",{staticClass:"hot text-primary"},[t._v("精彩评论:")]),t._l(t.commentList.hotComments,(function(e,n){return a("div",{key:n},[a("img",{staticClass:"hotimg",attrs:{src:e.user.avatarUrl,alt:""}}),a("div",{staticClass:"nickname "},[a("span",{staticClass:"text-primary"},[t._v(t._s(e.user.nickname))]),t._v(":"+t._s(e.content)),a("div",{staticClass:"time"},[t._v(t._s(t._f("timeFordat")(e.time)))])]),a("el-divider")],1)}))],2):t._e(),t.commentList.comments?a("div",{staticClass:"second"},[a("h5",{staticClass:"hot text-primary"},[t._v("最新评论:")]),t._l(t.commentList.comments,(function(e,n){return a("div",{key:n},[a("img",{staticClass:"hotimg",attrs:{src:e.user.avatarUrl,alt:""}}),a("div",{staticClass:"nickname "},[a("span",{staticClass:"text-primary"},[t._v(t._s(e.user.nickname))]),t._v(":"+t._s(e.content)),a("div",{staticClass:"time"},[t._v(t._s(t._f("timeFordat")(e.time)))])]),a("el-divider")],1)})),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total},on:{"current-change":t.handleChange}})],2):t._e()]),a("el-tab-pane",{attrs:{label:"专辑详情",name:"third"}},[a("h5",{staticClass:"text-primary",staticStyle:{"text-align":"left"}},[t._v("专辑介绍:")]),a("per",{staticClass:"description"},[t._v(" "+t._s(t.list.album.description)+" ")])],1)],1)],1)]):t._e()},s=[],i=(a("96cf"),a("1da1")),o=a("b775"),c={getContent:function(t){return Object(o["a"])({url:"album?id=".concat(t),method:"get"})},getAblumsDetailDynamic:function(t){return Object(o["a"])({url:"album/detail/dynamic?id=".concat(t),method:"get"})}},r=(a("99af"),{getCommentAlbumA:function(t){return Object(o["a"])({url:"comment/album?id=".concat(t.id,"&offset=").concat(t.offset),method:"get"})},getCommentAlbumB:function(t){return Object(o["a"])({url:"comment/album?id=".concat(t.id,"&offset=").concat(t.offset,"&before=").concat(t.before),method:"get"})},getHotCommentListA:function(t){return Object(o["a"])({url:"comment/album?id=".concat(t.id,"&type=").concat(t.type,"&offset=").concat(t.offset),method:"get"})},getHotCommentListB:function(t){return Object(o["a"])({url:"comment/album?id=".concat(t.id,"&type=").concat(t.type,"&offset=").concat(t.offset,"&before=").concat(t.before),method:"get"})}}),l={name:"AlbumContent",data:function(){return{textarea:"",id:null,loading:!0,list:[],ID:null,dynamicCount:null,imgSrc:"",name:"",alias:[],isSub:null,activeName:"first",commentCount:"",songList:[],offset:0,before:0,commentList:[],total:0}},computed:{ablumID:function(){return this.$store.getters.ablum}},created:function(){this.$nextTick((function(){this.feach()}))},mounted:function(){this.id=this.ablumID},methods:{feach:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,s,i,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.$store.getters.ablum,a){e.next=18;break}return n=localStorage.getItem("ablumID"),t.id=n,e.next=6,c.getContent(n);case 6:return s=e.sent,e.next=9,c.getAblumsDetailDynamic(n);case 9:i=e.sent,t.getCommentList(n),t.dynamicCount=i,t.commentCount="评论("+i.commentCount+")",t.list=s,t.songList=s.songs,t.loading=!1,e.next=30;break;case 18:return e.next=20,c.getContent(t.ablumID);case 20:return o=e.sent,e.next=23,c.getAblumsDetailDynamic(a);case 23:r=e.sent,t.getCommentList(a),t.dynamicCount=r,t.commentCount="评论("+r.commentCount+")",t.list=o,t.songList=o.songs,t.loading=!1;case 30:case"end":return e.stop()}}),e)})))()},getCommentList:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,s,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!(e.total>5e3)){a.next=10;break}return n={id:t,offset:e.offset,before:e.before},a.next=4,r.getCommentAlbumB(n);case 4:s=a.sent,s.total>5e3&&(e.before=e.commentList.comments[19].time),e.total=s.total,e.commentList=s,a.next=17;break;case 10:return i={id:t,offset:e.offset},a.next=13,r.getCommentAlbumA(i);case 13:o=a.sent,o.total>5e3&&(e.before=e.commentList.comments[19].time),e.total=o.total,e.commentList=o;case 17:case"end":return a.stop()}}),a)})))()},handleClick:function(t){localStorage.setItem("songID",t),this.$store.dispatch("app/chooseSong",t)},handleChange:function(t){this.offset=t,this.getCommentList(this.id)}}},m=l,u=(a("ae72"),a("2877")),d=Object(u["a"])(m,n,s,!1,null,"4ef2a8d0",null);e["default"]=d.exports},ae72:function(t,e,a){"use strict";var n=a("049e"),s=a.n(n);s.a}}]);